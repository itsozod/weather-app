(()=>{"use strict";async function e(){const e=document.querySelector(".search"),t=document.querySelector(".sos-container"),n=document.querySelector(".city-name"),o=document.querySelector(".temp"),c=document.querySelector(".icon"),s=document.querySelector(".desc-hum1"),r=document.querySelector(".desc-wind1"),a=document.querySelector(".desc-hum2"),i=document.querySelector(".desc-wind2"),d=document.querySelector(".humidity"),l=document.querySelector(".wind"),m=document.querySelector(".info"),u=document.querySelector(".card-container"),p=document.querySelector(".sos"),h=document.querySelector(".err"),y=document.querySelector(".progress"),g=document.querySelector(".search").value,C=document.querySelector(".bookmark");try{const w=await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${g}&units=metric&cnt=7&appid=fddff0c5843150647e172531616f327e`,{mode:"cors"}),f=await w.json();u.style.display="flex",y.classList.add("show"),setTimeout((()=>{y.classList.remove("show")}),3e3),setTimeout((()=>{document.querySelector(".search").value="","404"===f.cod||""===g?(t.classList.add("display"),h.textContent="Not found, enter a city or country name!",p.src="images/404.png",n.textContent="",o.textContent="",d.src="",d.alt="",s.textContent="",a.textContent="",l.src="",l.alt="",r.textContent="",i.textContent="",c.src="",c.alt="",m.textContent="",C.classList.add("disappear"),e.classList.remove("focus"),e.blur(),console.log(f)):(t.classList.remove("display"),h.textContent="",p.src="",n.textContent=f.name,o.textContent=`${Math.round(f.main.temp)}C`,d.src="images/humidity.png",s.textContent=f.main.humidity,a.textContent="Humidity",l.src="images/wind.png",r.textContent=f.wind.speed,i.textContent="Wind",C.classList.remove("disappear"),e.classList.remove("focus"),e.blur(),console.log(f)),"Clouds"===f.weather[0].main&&(c.src="images/clouds.png",m.textContent=f.weather[0].description),"Haze"===f.weather[0].main&&(c.src="images/mist.png",m.textContent=f.weather[0].description),"Mist"===f.weather[0].main&&(c.src="images/mist.png",m.textContent=f.weather[0].description),"Clear"===f.weather[0].main&&(c.src="images/clear.png",m.textContent=f.weather[0].description),"Rain"===f.weather[0].main&&(c.src="images/rain.png",m.textContent=f.weather[0].description),"Drizzle"===f.weather[0].main&&(c.src="images/drizzle.png",m.textContent=f.weather[0].description),"Snow"===f.weather[0].main&&(c.src="images/snow.png",m.textContent=f.weather[0].description)}),3e3)}catch(e){console.log("Not found",e.mesage)}}function t(e){const t=document.createElement("div");if(t.innerHTML=e,t.classList.add("card-container1"),!t.querySelector(".delete-button")){const e=document.createElement("button");e.textContent="Delete",e.classList.add("delete-button"),t.appendChild(e)}return t}function n(){const e=document.querySelector(".card-container").cloneNode(!0),n=JSON.parse(localStorage.getItem("weatherCards"))||[];n.push(e.innerHTML),localStorage.setItem("weatherCards",JSON.stringify(n));const o=document.querySelector(".bookmark-info"),c=document.querySelector(".bookmark-holder");c.innerHTML="";const s=document.querySelector(".bookmark-img"),r=document.querySelector(".bookmark-img1");r.classList.add("active"),s.classList.add("no-active"),n.forEach((e=>{const n=t(e);c.appendChild(n)})),n.length>0?o.classList.add("appear"):o.classList.remove("appear"),setTimeout((()=>{alert("Added to bookmarks"),r.classList.remove("active"),s.classList.remove("no-active")}),500),c.querySelectorAll(".bookmark").forEach((e=>e.style.display="none"))}function o(){const e=document.querySelector(".bookmark-holder");e.innerHTML="";const n=JSON.parse(localStorage.getItem("weatherCards"))||[],o=document.querySelector(".bookmark-info");n.forEach((n=>{const o=t(n);e.appendChild(o)})),n.length>0?o.classList.add("appear"):o.classList.remove("appear"),e.querySelectorAll(".bookmark").forEach((e=>e.style.display="none"))}document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".bookmark-holder");e&&e.addEventListener("click",(function(t){if(t.target.classList.contains("delete-button")){t.target.parentElement.remove();const n=document.querySelector(".bookmark-info");setTimeout((()=>{alert("Removed from bookmarks")}),500);const o=Array.from(e.children).map((e=>e.innerHTML));o.length>0?n.classList.add("appear"):n.classList.remove("appear"),localStorage.setItem("weatherCards",JSON.stringify(o))}}))})),function(){(function(){const e=document.querySelector("#content"),t=function(){const e=document.createElement("header");e.setAttribute("id","header");const t=document.createElement("h1");t.classList.add("h1-header"),t.textContent="World Weather";const n=document.createElement("img");return n.classList.add("sun"),n.src="./images/sun-icon.png",e.appendChild(t),e.appendChild(n),e}(),n=function(){const e=document.createElement("main");return e.setAttribute("id","main"),e}(),o=function(){const e=document.createElement("div");return e.classList.add("form-container"),e.innerHTML='\n    <form id="form" action="/">\n    <input class="search" type="search" placeholder="Search">\n    </form>\n    <img src="./images/searchBtn.png" alt="search" class="searchBtn">\n    ',e}(),c=function(){const e=document.createElement("section");return e.classList.add("section"),e.innerHTML='\n  <div class="main-div">\n  <div class="card-container">\n  <div class="progress">\n  <div class="color"></div>\n  </div>\n  <div class="card">\n  <div class="sos-container">\n  <img src="#" alt="sos" class="sos">\n  <p class="err"></p>\n  </div>\n  <h1 class="city-name"></h1>\n  <img src="#" alt="icon" class="icon" />\n  <p class="info"></p>\n  <p class="temp"></p>\n  </div>\n  <div class="details">\n  <div class="col1">\n    <img src="#" alt="humidity" class="humidity" />\n  </div>\n  <div class="col2">\n    <p class="desc-hum1"></p>\n    <p class="desc-hum2"></p>\n  </div>\n  <div class="col3">\n    <img src="#" alt="wind" class="wind" />\n  </div>\n  <div class="col4">\n    <p class="desc-wind1"></p>\n    <p class="desc-wind2"></p>\n  </div>\n</div>\n<div class="bookmark">\n<h3 class="book-desc">Add to bookmarks</h3>\n<img src="./images/bookmark1.png" class="bookmark-img">\n<img src="./images/bookmark2.png" class="bookmark-img1">\n</div>\n  </div>\n  </div>\n  ',e}(),s=function(){const e=document.createElement("div");e.classList.add("bookmark-info");const t=document.createElement("h1");return t.classList.add("h1-info"),t.textContent="Bookmarks",e.appendChild(t),e}(),r=function(){const e=document.createElement("section");return e.classList.add("bookmark-holder"),e}();n.appendChild(o),n.appendChild(c),n.appendChild(s),n.appendChild(r),e.appendChild(t),e.appendChild(n)})(),async function(){const e=document.querySelector(".city-name"),t=document.querySelector(".temp"),n=document.querySelector(".icon"),o=document.querySelector(".desc-hum1"),c=document.querySelector(".desc-wind1"),s=document.querySelector(".desc-hum2"),r=document.querySelector(".desc-wind2"),a=document.querySelector(".humidity"),i=document.querySelector(".wind"),d=document.querySelector(".info"),l=document.querySelector(".card-container");try{const m=await fetch("https://api.openweathermap.org/data/2.5/weather?q=dushanbe&units=metric&appid=fddff0c5843150647e172531616f327e"),u=await m.json();l.style.display="flex",e.textContent=u.name,t.textContent=`${Math.round(u.main.temp)}C`,a.src="images/humidity.png",o.textContent=u.main.humidity,s.textContent="Humidity",i.src="images/wind.png",c.textContent=u.wind.speed,r.textContent="Wind","Clouds"===u.weather[0].main&&(n.src="images/clouds.png",d.textContent=u.weather[0].description),"Haze"===u.weather[0].main&&(n.src="images/mist.png",d.textContent=u.weather[0].description),"Clear"===u.weather[0].main&&(n.src="images/clear.png",d.textContent=u.weather[0].description),"Rain"===u.weather[0].main&&(n.src="images/rain.png",d.textContent=u.weather[0].description),"Drizzle"===u.weather[0].main&&(n.src="images/drizzle.png",d.textContent=u.weather[0].description),"Snow"===u.weather[0].main&&(n.src="images/snow.png",d.textContent=u.weather[0].description),console.log(u)}catch(e){console.log("Not found",e)}}(),document.querySelector("#form").addEventListener("submit",(e=>{e.preventDefault()}));const t=document.querySelector(".searchBtn");t.addEventListener("click",e);const c=document.querySelector(".search");c.addEventListener("keydown",(e=>{"Enter"!==e.key&&13!==e.keyCode||t.click()})),c.addEventListener("focus",(()=>{c.classList.add("focus")})),document.querySelector(".bookmark-img").addEventListener("click",n),document.addEventListener("DOMContentLoaded",o)}()})();